<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>HAOTOWN一图 背景图 使用实例</title>
		<style>
		#body{
		background: url(img/bj@1.jpg);
		background-size: cover;
   		background-repeat: no-repeat;
    		background-attachment: fixed;
    		font: "微软雅黑";
		}
		
		</style>
	</head>
<body id="oneimg">
<div class="main">
	<h1>使用实例 <input type="submit" name="button" id="button" value="ChangeImg" onclick="ChangeOneImg()" /></h1>
	
</div>

<script language="javascript" type="text/javascript">

GetOneImg();  //获取随机图片地址
	ChangeOneImg();//进行更换图片操作
	setInterval(ChangeOneImg,8000);//重复更换图片
	function GetOneImg(){ 
	OneImg="http://haocity.top/img/bj@"+Math.round(Math.random()*2000)+".jpg"
	 }

	function ChangeOneImg(){
	console.log(OneImg);//调试图片地址
	document.getElementById("oneimg").style.backgroundImage = "url("+OneImg+")";
	GetOneImg();
	LoadImg(OneImg);//预先加载下一张图片
	 }


    function LoadImg(url) { 
	var img = new Image(); 
	img.src = url; 
	} 



</script>


	</body>
</html>
